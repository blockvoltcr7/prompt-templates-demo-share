# Story Analysis: [STORY-KEY] - [Title]

**Story Key**: [STORY-KEY]
**Created**: [DATE]
**Status**: Draft
**Analyzed By**: AI Agent

## Story Summary
[Extract from story description]

## Acceptance Criteria
- [ ] AC-001: [Acceptance criterion 1]
- [ ] AC-002: [Acceptance criterion 2]
- [ ] AC-003: [Acceptance criterion 3]

## User Personas
| Persona | Role | Permissions | Key Behaviors |
|---------|------|-------------|---------------|
| [Persona 1] | [Role] | [Permissions] | [Behaviors] |
| [Persona 2] | [Role] | [Permissions] | [Behaviors] |

## Functional Requirements

### FR-001: [Requirement Name]
**Description**: [What needs to be tested]
**Test Types**: UI / API / Integration
**Priority**: High / Medium / Low
**Acceptance Criteria**: AC-001

### FR-002: [Requirement Name]
**Description**: [What needs to be tested]
**Test Types**: UI / API / Integration
**Priority**: High / Medium / Low
**Acceptance Criteria**: AC-002

## Test Scenario Categories

### Positive Flow Scenarios
1. **[Scenario Name]**: [Description]
   - **Precondition**: [What must be true before]
   - **Steps**: [High-level steps]
   - **Expected Result**: [What should happen]
   - **Test Type**: UI / API / Integration
   - **Priority**: P0 / P1 / P2

2. **[Scenario Name]**: [Description]
   - **Precondition**: [What must be true before]
   - **Steps**: [High-level steps]
   - **Expected Result**: [What should happen]
   - **Test Type**: UI / API / Integration
   - **Priority**: P0 / P1 / P2

### Negative Flow Scenarios
1. **[Scenario Name]**: [Description]
   - **Error Condition**: [What error to trigger]
   - **Expected Behavior**: [How system should handle]
   - **Test Type**: UI / API / Integration
   - **Priority**: P0 / P1 / P2

2. **[Scenario Name]**: [Description]
   - **Error Condition**: [What error to trigger]
   - **Expected Behavior**: [How system should handle]
   - **Test Type**: UI / API / Integration
   - **Priority**: P0 / P1 / P2

### Edge Cases
1. **[Scenario Name]**: [Description]
   - **Boundary Condition**: [What edge to test]
   - **Expected Behavior**: [How system should handle]
   - **Priority**: P1 / P2

2. **[Scenario Name]**: [Description]
   - **Boundary Condition**: [What edge to test]
   - **Expected Behavior**: [How system should handle]
   - **Priority**: P1 / P2

### Data Validation Scenarios
1. **[Validation Rule]**: [Description]
   - **Valid Inputs**: [Examples]
   - **Invalid Inputs**: [Examples]
   - **Expected Validation Messages**: [Messages]
   - **Priority**: P1 / P2

## Non-Functional Requirements

### Performance
- **Response Time**: [e.g., < 2 seconds for page load]
- **Load Capacity**: [e.g., 100 concurrent users]
- **Throughput**: [e.g., 1000 requests per second]

### Security
- **Authentication Required**: Yes / No
- **Authorization Rules**: [Describe role-based access]
- **Data Sensitivity**: [PII / Financial / Public]
- **Encryption**: [In-transit / At-rest / Both]

### Accessibility
- **WCAG Compliance Level**: A / AA / AAA
- **Screen Reader Support**: Yes / No
- **Keyboard Navigation**: Yes / No

### Compatibility
- **Browsers**: Chrome, Firefox, Safari, Edge
- **Devices**: Desktop / Tablet / Mobile
- **Operating Systems**: Windows, macOS, iOS, Android
- **Screen Sizes**: [Responsive breakpoints]

## Test Data Requirements
| Data Type | Description | Example | Source | Volume |
|-----------|-------------|---------|--------|--------|
| [Data Type 1] | [Description] | [Example] | [Test data service / API / Manual] | [N records] |
| [Data Type 2] | [Description] | [Example] | [Test data service / API / Manual] | [N records] |

## Integration Dependencies
| System | Endpoint/Method | Purpose | Failure Mode | Mock Required |
|--------|----------------|---------|--------------|---------------|
| [System 1] | [Endpoint] | [Purpose] | [How it fails] | Yes / No |
| [System 2] | [Endpoint] | [Purpose] | [How it fails] | Yes / No |

## Test Environment Requirements
- **Environment**: Dev / Staging / Prod-like
- **Database**: [Type and version]
- **Test Accounts**: [Number and types needed]
- **API Access**: [Required permissions]
- **Feature Flags**: [Any toggles to enable]

## Risks and Blockers

### Risks
| Risk | Impact | Probability | Mitigation Strategy |
|------|--------|-------------|---------------------|
| [Risk 1] | High / Medium / Low | High / Medium / Low | [How to mitigate] |
| [Risk 2] | High / Medium / Low | High / Medium / Low | [How to mitigate] |

### Blockers
- [ ] [Blocker 1]: [Description and resolution plan]
- [ ] [Blocker 2]: [Description and resolution plan]

## Test Coverage Summary
- **Total Scenarios Identified**: [N]
- **UI Test Scenarios**: [N]
- **API Test Scenarios**: [N]
- **Integration Test Scenarios**: [N]
- **Edge Cases**: [N]
- **Validation Scenarios**: [N]

**Coverage by Priority**:
- **P0 (Critical)**: [N] scenarios
- **P1 (High)**: [N] scenarios
- **P2 (Medium)**: [N] scenarios
- **P3 (Low)**: [N] scenarios

## Assumptions
1. [Assumption 1]
2. [Assumption 2]
3. [Assumption 3]

## Ambiguities/Questions
- [NEEDS CLARIFICATION: Question 1]
- [NEEDS CLARIFICATION: Question 2]
- [NEEDS CLARIFICATION: Question 3]

## Next Steps
- [ ] Review story analysis with team
- [ ] Run /clarify-story to resolve ambiguities
- [ ] Run /test-plan to create comprehensive test plan
- [ ] Identify test data sources
- [ ] Set up test environment

## Clarifications
*This section will be populated by /clarify-story command*

### Session [DATE]
- Q: [Question] → A: [Answer]
- Q: [Question] → A: [Answer]

---

**Analysis Complete**: [Yes / No]
**Ready for Test Planning**: [Yes / No]
